<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Tracking</title>
    <script>
        window.onload = function() {
            // Parámetros del seguimiento
            var emailSubject = 'Noticia-Premios';  // Cambia esto si es necesario
            var emailRecipient = 'FraterNet';       // Cambia esto si es necesario
            var campaignName = 'HospitalHabana';    // Cambia esto si es necesario

            // Tu Measurement ID y API Secret
            var measurementId = 'G-EGT50HQ4HV'; // Measurement ID 
            var apiSecret = 'AS8LGwkHSbSffQ2aXOMlRw'; // API Secret

            // Crear la solicitud de seguimiento usando fetch con no-cors
            fetch(`https://www.google-analytics.com/mp/collect?measurement_id=${measurementId}&api_secret=${apiSecret}`, {
                method: "POST",
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    client_id: '123456789', // Puede ser cualquier identificador único del cliente
                    events: [
                        {
                            name: 'email_open',
                            params: {
                                email_subject: emailSubject,
                                email_recipient: emailRecipient,
                                campaign_name: campaignName
                            }
                        }
                    ]
                }),
                mode: 'no-cors' // Importante para evitar el bloqueo de CORB
            }).then(() => {
                console.log('Tracking request sent');
            }).catch((error) => {
                console.error('Error in tracking:', error);
            });
        };
    </script>
</head>
<body>
    <h1>Tracking Email Open</h1>
    <p>This page tracks the opening of the email.</p>
</body>
</html>
