<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Tracking</title>
    <script>
        window.onload = function() {
            // Parámetros del seguimiento
            var emailSubject = 'Noticia-Premios';
            var emailRecipient = 'FraterNet';
            var campaignName = 'HospitalHabana';

            const measurementId = 'G-EGT50HQ4HV'; // Measurement ID
            const apiSecret = 'AS8LGwkHSbSffQ2aXOMlRw'; // API Secret   

            // Crear la solicitud de seguimiento usando fetch con no-cors
            fetch(`https://www.google-analytics.com/mp/collect?measurement_id=${measurementId}&api_secret=${apiSecret}`, {
                method: "POST",
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    client_id: '123456789', // Puede ser cualquier identificador único del cliente
                    events: [
                        {
                            name: 'email_open',
                            params: {
                                email_subject: emailSubject,
                                email_recipient: emailRecipient,
                                campaign_name: campaignName
                            }
                        }
                    ]
                }),
                mode: 'no-cors' // Importante para evitar el bloqueo de CORB
            }).then(() => {
                console.log('Tracking request sent');
            }).catch((error) => {
                console.error('Error in tracking:', error);
            });
        };
    </script>
</head>
<body>
    <h1>Tracking Email Open</h1>
    <p>This page tracks the opening of the email.</p>
</body>
</html>
