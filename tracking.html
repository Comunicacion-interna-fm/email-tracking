<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Tracking</title>
    <script>
        // Funci칩n para obtener los par치metros de la URL
        function getURLParams(param) {
            var urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        window.onload = function() {
            // Captura los par치metros de la URL
            var emailSubject = getURLParams('email_subject') || 'default_subject';
            var emailRecipient = getURLParams('email_recipient') || 'default_recipient';
            var campaignName = getURLParams('campaign_name') || 'default_campaign';

            // Tu Measurement ID y API Secret
            var measurementId = 'G-EGT50HQ4HV'; // Measurement ID 
            var apiSecret = 'AS8LGwkHSbSffQ2aXOMlRw'; // API Secret

            // Crear la URL para enviar los datos a Google Analytics
            var trackingUrl = `https://www.google-analytics.com/mp/collect?measurement_id=${measurementId}&api_secret=${apiSecret}&client_id=123456789&email_subject=${emailSubject}&email_recipient=${emailRecipient}&campaign_name=${campaignName}`;

            // Enviar los datos mediante una imagen (tracking pixel)
            var trackingImage = new Image();
            trackingImage.src = trackingUrl;

            // Mostrar en la consola los par치metros que estamos enviando (para debugging)
            console.log('Tracking sent with params: ', emailSubject, emailRecipient, campaignName);
        };
    </script>
</head>
<body>
    <h1>Email Tracking</h1>
    <p>This page tracks the opening of an email using Google Analytics 4.</p>
</body>
</html>
